<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--namespace:接口的全限定名称-->
<mapper namespace="mapper.CartDao">
    <!--id:方法的名称  resultType:返回值类型(若为对象，为全限定名称或别名))-->
    <select id="selectCarts" resultType="entity.Cart">
        select cart_id,
               cart_p_filename,
               cart_p_name,
               cart_p_price,
               cart_quantity,
               cart_p_stock,
               cart_p_id,
               cart_u_id,
               cart_valid
        from cart
    </select>

    <insert id="insertCart">
        insert into cart (cart_id, cart_p_filename, cart_p_name, cart_p_price, cart_quantity, cart_p_stock, cart_p_id,
                          cart_u_id, cart_valid)
        values (null, #{cart_p_filename}, #{cart_p_name}, #{cart_p_price}, #{cart_quantity},
                #{cart_p_stock}, #{cart_p_id}, #{cart_u_id}, 1);
    </insert>

    <delete id="deleteCart">
        delete
        from cart
        where cart_p_filename = #{cart_p_filename}
          and cart_u_id = #{cart_u_id}
    </delete>

    <update id="updateCart">
        update cart
        set cart_quantity=#{cart_quantity}
        where cart_id = #{cart_id}
    </update>

    <select id="selectCartById" resultType="entity.Cart">
        select cart_id,
               cart_p_filename,
               cart_p_name,
               cart_p_price,
               cart_quantity,
               cart_p_stock,
               cart_p_id,
               cart_u_id,
               cart_valid
        from cart
        where cart_u_id = #{USER_ID}
    </select>
</mapper>